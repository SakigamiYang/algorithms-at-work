# 时间轮

## 1. 定义

时间轮是一种用于定时任务调度的数据结构。它有固定数量的槽位，每个槽位代表一个时间间隔，例如1秒或1分钟。任务被插入到相应的槽位中，当时间轮转动时，任务会被触发执行。

## 2. 特点

- 高效的任务调度：可以快速定位到任务所在的槽位，从而实现高效的任务调度。
- 支持大量任务：时间轮的级别和槽位数量可调，支持存储大量任务。
- 精确的任务触发：任务被插入到相应的槽位中，当时间轮转动到该槽位时，任务会被准确触发执行。

## 3. 注意点

- 时间轮的级别和槽位数量的选择：根据实际需求和系统负载情况，选择合适的时间轮级别和槽位数量。较高的级别和槽位数量可以提高任务调度的精度和并发性，但也会增加内存和计算开销。
- 时间轮的并发性：在多线程环境下，需要考虑时间轮的并发性。可以使用锁或其他同步机制来保证多个线程对时间轮的访问安全。
- 任务执行时间的控制：由于任务的执行时间可能会超过时间轮的时间间隔，需要考虑如何处理任务执行时间超过时间轮间隔的情况。可以选择将超时任务放入下一个级别的时间轮中，或者使用其他策略来处理。

## 4. 使用场景

可用于定时任务、超时控制、频率限制。

如 Netty3 中 IO 事件的超时管理、Kafka / Zookeeper / Linux 内核中实现延迟功能等。